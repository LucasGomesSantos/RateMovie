{"ast":null,"code":"import _toConsumableArray from\"D:/Projetos/Projeto KPMG/RateMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/Projetos/Projeto KPMG/RateMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{RepositoryItem}from\"./RepositoryItem\";import{useState,useEffect}from\"react\";import FeaturedMovie from'../components/FeaturedMovie';import Header from'../components/Header';import'../styles/repositories.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function RepositoryList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),repositories=_useState2[0],setRepositories=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),guests=_useState4[0],setGuests=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),blackHeader=_useState6[0],setblackHeader=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),index=_useState8[0],setIndex=_useState8[1];var nome=localStorage.getItem('keyItemName');var urlBase='https://api.themoviedb.org/3/movie/top_rated?language=en-US&api_key=0ad7ce2d705fb476cb9ac2387a7fc0b0&page=';useEffect(function(){var repos=[];for(var i=1;i<6;i++){fetch(urlBase+i).then(function(response){return response.json();}).then(function(data){return repos.push.apply(repos,_toConsumableArray(data['results']));});//setRepositories(data['results']))\n}var step1=repositories.length-1-0+1;var step2=Math.random()*step1;var step3=Math.floor(step2)+0;setIndex(step3);setRepositories(repos.sort(function(x){return x.vote_average;}));},[]);useEffect(function(){fetch('https://api.themoviedb.org/3/authentication/guest_session/new?api_key=0ad7ce2d705fb476cb9ac2387a7fc0b0').then(function(response){return response.json();}).then(function(data){return setGuests(data);});},[]);return/*#__PURE__*/_jsxs(\"section\",{className:\"repository-list\",children:[/*#__PURE__*/_jsx(Header,{black:blackHeader}),repositories&&/*#__PURE__*/_jsx(FeaturedMovie,{item:repositories[index]}),/*#__PURE__*/_jsx(\"h1\",{children:\" Top 100 Filmes \"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Bem vindo \",nome,\", voc\\xEA est\\xE1 conectado como o visitante ID: \",guests===null||guests===void 0?void 0:guests.guest_session_id]}),/*#__PURE__*/_jsx(\"ul\",{children:repositories.map(function(repository){return/*#__PURE__*/_jsx(RepositoryItem,{repository:repository},repository.id);})})]});}export default RepositoryList;","map":{"version":3,"sources":["D:/Projetos/Projeto KPMG/RateMovie/src/components/RepositoryList.tsx"],"names":["RepositoryItem","useState","useEffect","FeaturedMovie","Header","RepositoryList","repositories","setRepositories","guests","setGuests","blackHeader","setblackHeader","index","setIndex","nome","localStorage","getItem","urlBase","repos","i","fetch","then","response","json","data","push","step1","length","step2","Math","random","step3","floor","sort","x","vote_average","guest_session_id","map","repository","id"],"mappings":"0TAAA,OAASA,cAAT,KAA+B,kBAA/B,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CAEA,MAAO,6BAAP,C,wFAkBA,MAAO,SAASC,CAAAA,cAAT,EAAyB,eAEQJ,QAAQ,CAAe,EAAf,CAFhB,wCAEzBK,YAFyB,eAEXC,eAFW,8BAGJN,QAAQ,EAHJ,yCAGzBO,MAHyB,eAGjBC,SAHiB,8BAIKR,QAAQ,CAAC,KAAD,CAJb,yCAIzBS,WAJyB,eAIZC,cAJY,8BAKPV,QAAQ,CAAC,IAAD,CALD,yCAKzBW,KALyB,eAKlBC,QALkB,eAMhC,GAAMC,CAAAA,IAAI,CAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAb,CACA,GAAMC,CAAAA,OAAO,CAAG,4GAAhB,CAIQf,SAAS,CAAC,UAAM,CACZ,GAAMgB,CAAAA,KAAK,CAAG,EAAd,CACA,IAAI,GAAIC,CAAAA,CAAC,CAAC,CAAV,CAAaA,CAAC,CAAC,CAAf,CAAkBA,CAAC,EAAnB,CAAsB,CACtBC,KAAK,CAACH,OAAO,CAACE,CAAT,CAAL,CACCE,IADD,CACM,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADd,EAECF,IAFD,CAEM,SAAAG,IAAI,QAAIN,CAAAA,KAAK,CAACO,IAAN,OAAAP,KAAK,oBAASM,IAAI,CAAC,SAAD,CAAb,EAAT,EAFV,EAGI;AACH,CACD,GAAIE,CAAAA,KAAK,CAAIpB,YAAY,CAACqB,MAAb,CAAoB,CAArB,CAA0B,CAA1B,CAA8B,CAA1C,CACA,GAAIC,CAAAA,KAAK,CAAGC,IAAI,CAACC,MAAL,GAAgBJ,KAA5B,CACA,GAAIK,CAAAA,KAAK,CAAGF,IAAI,CAACG,KAAL,CAAWJ,KAAX,EAAoB,CAAhC,CACAf,QAAQ,CAACkB,KAAD,CAAR,CAEAxB,eAAe,CAACW,KAAK,CAACe,IAAN,CAAW,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,YAAN,EAAZ,CAAD,CAAf,CACH,CAdQ,CAcN,EAdM,CAAT,CAiBRjC,SAAS,CAAC,UAAM,CACZkB,KAAK,CAAC,wGAAD,CAAL,CACCC,IADD,CACM,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADd,EAECF,IAFD,CAEM,SAAAG,IAAI,QAAIf,CAAAA,SAAS,CAACe,IAAD,CAAb,EAFV,EAGH,CAJQ,CAIN,EAJM,CAAT,CAOI,mBACI,iBAAS,SAAS,CAAE,iBAApB,wBACA,KAAC,MAAD,EAAQ,KAAK,CAAEd,WAAf,EADA,CAGCJ,YAAY,eACb,KAAC,aAAD,EAAe,IAAI,CAAGA,YAAY,CAACM,KAAD,CAAlC,EAJA,cAOA,wCAPA,cAQA,mCAAeE,IAAf,qDAAgEN,MAAhE,SAAgEA,MAAhE,iBAAgEA,MAAM,CAAE4B,gBAAxE,GARA,cASI,oBACK9B,YAAY,CAAC+B,GAAb,CAAiB,SAAAC,UAAU,CAAI,CAC5B,mBAAO,KAAC,cAAD,EAAoC,UAAU,CAAIA,UAAlD,EAAqBA,UAAU,CAACC,EAAhC,CAAP,CACF,CAFD,CADL,EATJ,GADJ,CAiBH,CAED,cAAelC,CAAAA,cAAf","sourcesContent":["import { RepositoryItem } from \"./RepositoryItem\";\r\nimport { useState, useEffect } from \"react\";\r\nimport FeaturedMovie from '../components/FeaturedMovie';\r\nimport Header from '../components/Header';\r\n\r\nimport '../styles/repositories.scss'\r\n\r\n\r\ninterface Repository{\r\n    id: any;\r\n    original_title: string;\r\n    vote_average: string;\r\n    overview: string;\r\n    poster_path: string;\r\n    release_date: string;\r\n}\r\n\r\ninterface Guest{\r\n    guest_session_id: string;\r\n}\r\n\r\n\r\n\r\nexport function RepositoryList(){\r\n\r\nconst [repositories, setRepositories] = useState<Repository[]>([])\r\nconst [guests, setGuests] = useState<Guest>()\r\nconst [blackHeader, setblackHeader]= useState(false);\r\nconst [index, setIndex]= useState(null);\r\nconst nome = localStorage.getItem('keyItemName')\r\nconst urlBase = 'https://api.themoviedb.org/3/movie/top_rated?language=en-US&api_key=0ad7ce2d705fb476cb9ac2387a7fc0b0&page='\r\n\r\n\r\n    \r\n        useEffect(() => {\r\n            const repos = []\r\n            for(let i=1; i<6; i++){\r\n            fetch(urlBase+i)\r\n            .then(response => response.json())\r\n            .then(data => repos.push(...data['results']))\r\n                //setRepositories(data['results']))\r\n            }\r\n            let step1 = (repositories.length-1) - 0 + 1;\r\n            let step2 = Math.random() * step1;\r\n            let step3 = Math.floor(step2) + 0;\r\n            setIndex(step3);\r\n\r\n            setRepositories(repos.sort(x => x.vote_average));\r\n        }, [])\r\n\r\n\r\nuseEffect(() => {\r\n    fetch('https://api.themoviedb.org/3/authentication/guest_session/new?api_key=0ad7ce2d705fb476cb9ac2387a7fc0b0')\r\n    .then(response => response.json())\r\n    .then(data => setGuests(data))\r\n}, []);\r\n \r\n\r\n    return (\r\n        <section className =\"repository-list\">\r\n        <Header black={blackHeader}/>\r\n\r\n        {repositories && \r\n        <FeaturedMovie item ={repositories[index]}/> \r\n      }\r\n\r\n        <h1> Top 100 Filmes </h1>\r\n        <h3>Bem vindo {nome}, você está conectado como o visitante ID: {guests?.guest_session_id}</h3>\r\n            <ul>\r\n                {repositories.map(repository => {\r\n                    return <RepositoryItem key={repository.id} repository = {repository} />\r\n                 })}\r\n            </ul>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default RepositoryList;"]},"metadata":{},"sourceType":"module"}